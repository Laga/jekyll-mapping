<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640" />

    <link rel="stylesheet" href="/jekyll-mapping/stylesheets/core.css" media="screen"/>
    <link rel="stylesheet" href="/jekyll-mapping/stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)"/>
    <link rel="stylesheet" href="/jekyll-mapping/stylesheets/pygment_trac.css"/>

    <script type="text/javascript" src="/jekyll-mapping/javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/jekyll-mapping/javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Jekyll-mapping by matthewowen</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/matthewowen/jekyll-mapping">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Jekyll-mapping</h1>
            <h2>Easily embed maps on Jekyll sites, with support for Google Maps and OpenStreetMap</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/matthewowen/jekyll-mapping/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/matthewowen/jekyll-mapping/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h1 id='jekyll_mapping'>Jekyll Mapping</h1>

<p>Jekyll mapping is a plugin for Jekyll that takes away the pain of using Google Maps and OpenStreetMap on your site. Here are some of the things it makes it easy to do:</p>

<ul>
<li>
<p>Give each piece of content a location, allowing you to:</p>

<ul>
<li>Display a map on each page, showing the location set for the content (perfect if you want to list events on your website, and embed a map showing where they are)</li>

<li>Display a map, with a marker for each piece of content linking users through to the page (perfect if you&#8217;re a business and you want to list all of your locations so that users can click through to the nearest one)</li>
</ul>
</li>

<li>
<p>Set multiple locations on a single piece of content and map them all (perfect if you want a map showing all of your company&#8217;s offices)</p>
</li>

<li>
<p>Set a KML layer (or multiple KML layers) on a piece of content and display on a map. This one offers a world of possibilities:</p>

<ul>
<li>Show directions or routes</li>

<li>Display up to the minute data coming from a continually updating feed</li>

<li>Display data overlays on map as a form of data presentation</li>
</ul>
</li>
</ul>

<h2 id='examples'>Examples</h2>

<h3 id='plot_your_jekyll_sites_content_on_a_map'>Plot your Jekyll site&#8217;s content on a map</h3>

<p>Try clicking on the markers&#8230;</p>
<div>

                    <div id='jekyll-mapping' style='height:350px;width:475px;'>
                    </div>
                    <script type='text/javascript'>
                        window.onload = function () { jekyllMapping.loadScript({"zoom":10,"api_key":"AIzaSyDNhj22EqZoDYXSF90FMCQjS-nQx4JG4uI","pages":[{"latitude":-14,"longitude":32,"link":"/jekyll-mapping/2012/07/15/multiple-locations.html","title":"A post with multiple locations"},{"latitude":10,"longitude":10,"link":"/jekyll-mapping/2012/07/15/post-with-location.html","title":"A post with a location"}],"dimensions":{"height":350,"width":475},"provider":"google_js"}); };
                    </script>
                    
</div>
<h3 id='set_multiple_locations_on_a_single_piece_of_jekyll_content_and_map_them_all'>Set multiple locations on a single piece of Jekyll content, and map them all:</h3>

<p><a href='/jekyll-mapping/2012/07/15/multiple-locations.html'>See the example&#8230;</a></p>

<h3 id='display_a_kml_overlay_on_a_piece_of_jekyll_content'>Display a KML overlay on a piece of Jekyll content</h3>

<p><a href='/jekyll-mapping/2012/07/15/kml-layer.html'>See the example&#8230;</a></p>

<h2 id='supported_providers'>Supported providers</h2>

<h3 id='google_static_image'>Google static image</h3>

<pre><code>mapping:
	provider: google_static</code></pre>

<p>https://developers.google.com/maps/documentation/staticmaps/</p>

<p>Embeds a static image, centered on the specifced location, with a marker at the specified location. This provider doesn&#8217;t have as much flexibilitity, but it&#8217;s easy to set up</p>

<h3 id='google_js_api'>Google JS API</h3>

<pre><code>mapping:
	provider: google_js</code></pre>

<p>https://developers.google.com/maps/documentation/javascript/</p>

<p>Embeds an interactive map using the V3 JS API. Using this requires an API key to be specified within _config.yml (and you&#8217;ll face usage limits if you don&#8217;t want to pay money)</p>

<h3 id='openstreetmap'>OpenStreetMap</h3>

<pre><code>mapping:
	provider: openstreetmap</code></pre>

<p>Uses <a href='http://www.openstreetmap.org/'>OpenStreetMap</a> and <a href='http://openlayers.org/'>OpenLayers</a> to provide interactive maps. Doesn&#8217;t require an API key, and doesn&#8217;t come with usage limits (but use it responsibly)</p>

<h2 id='basic_usage'>Basic usage</h2>

<p>To use, include configuration information in _config.yml. At minimum, specify a provider:</p>

<pre><code>mapping:
	provider: google_static</code></pre>

<p>If desired, set default dimensions for maps and a custom zoom level (the default zoom level is 10):</p>

<pre><code>mapping:
	provider: openstreetmap
	zoom: 8
	dimensions:
		width: 600
		height: 400</code></pre>

<p>If using Google JS API, include an API key:</p>

<pre><code>mapping:
	provider: google_js
	api_key: 123456
	zoom: 10
	dimensions:
		width: 600
		height: 400</code></pre>

<p>Put the contents of &#8216;_includes&#8217; in your &#8216;_includes&#8217; directory and the contents of &#8216;_plugins&#8217; in your &#8216;_plugins&#8217; directory (or just copy the directories if you don&#8217;t have those directories yet).</p>

<p>Include the required JavaScript at the foot of your templates:</p>

<pre><code>{% include jekyll_mapping.html %}
&lt;/body&gt;</code></pre>

<p>Set the relevant values in the YAML front matter of pages and posts:</p>

<pre><code>mapping:
	latitude: 51.101
	longitude: 0.1</code></pre>

<p>Include the render_map tag in your templates where you&#8217;d like the map to appear:</p>

<pre><code>{% render_map %}</code></pre>

<p>Optionally, specify the width for the map here:</p>

<pre><code>{% render_map 500,500 %}</code></pre>

<p>You don&#8217;t need to wrap the above in any if statements - jekyll-mapping won&#8217;t output anything if it isn&#8217;t supposed to.</p>

<p>Enjoy!</p>

<h2 id='further_usage'>Further usage</h2>

<p>At it&#8217;s most basic, you can just set a latitude and longitude for a piece of content. In this case, it&#8217;ll just plot that location on a map. However, you can do some other exciting things too!</p>

<h3 id='multiple_locations'>Multiple Locations</h3>

<p>If you set multiple locations, they&#8217;ll all be mapped and the map will be zoomed and panned to fit them. You can even set a link on them (and have them link to content). Use like so:</p>

<pre><code>mapping:
	locations:
		- title: foo
		  latitude: 10
		  longitude: 10
		- title: bar
		  link: /some/awesome/path
		  latitude: -10
		  longitude: -10</code></pre>

<h3 id='kml'>KML</h3>

<p>If you&#8217;d like to use KML, you can do that too. Just add &#8216;layers&#8217; in a similar fashion:</p>

<pre><code>mapping:
	layers:
		- http://api.flickr.com/services/feeds/geo/?g=322338@N20&amp;lang=en-us&amp;format=feed-georss
		- http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml</code></pre>

<p>Right now, multiple locations works for both google_js and openstreetmap. KML definitely works for google_js and should work for openstreetmap, but needs more testing.</p>

<h3 id='listing_content'>Listing content</h3>

<p>Use the following tag instead of {% render_map %}:</p>

<pre><code>{% render_index_map %}</code></pre>

<p>This will plot a marker for every post on the site which has a latitude and longitude. Clicking on the marker will take you to the piece of content</p>

<p>Add configuration like so</p>

<pre><code>{% render_index_map 400,400:foo,bar %}</code></pre>

<p>This will render a 400x400 map, and only list posts from the categories &#8216;foo&#8217; and &#8216;bar&#8217;.</p>

<pre><code>{% render_index_map :foo,bar %}</code></pre>

<p>This will render a map at the default size, listing posts from the categories &#8216;foo&#8217; and &#8216;bar&#8217;</p>

<pre><code>{% render_index_map 400,400: %}</code></pre>

<p>This will render a 400x400 map, listing posts from all categories.</p>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/matthewowen">matthewowen</a> can be found on <a href="https://github.com/matthewowen/jekyll-mapping">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>
    
    
            <script type="text/javascript">
var jekyllMapping = (function () {
    'use strict';
    var settings;
    return {
        plotArray: function(locations) {
            function jekyllMapListen (m, s) {
                if (s.link) {
                    google.maps.event.addListener(m, 'click', function() {
                        window.location.href = s.link;
                    });
                }
            }
            var bounds = new google.maps.LatLngBounds(), markers = [], s, l, m;
            while (locations.length > 0) {
                s = locations.pop();
                console.log(s);
                l = new google.maps.LatLng(s.latitude, s.longitude);
                m = new google.maps.Marker({
                    position: l,
                    map: this.map,
                    title: s.title
                });
                markers.push(m);
                bounds.extend(l);                
                jekyllMapListen(m, s);
            }
            this.map.fitBounds(bounds);
        },
        indexMap: function () {
            this.plotArray(settings.pages);
        },
        pageToMap: function () {
            if (typeof(settings.latitude) !== 'undefined' && typeof(settings.longitude) !== 'undefined') {
                this.options.center = new google.maps.LatLng(settings.latitude, settings.longitude);

                var mainMarker = new google.maps.Marker({
                    position: this.options.center,
                    map: this.map,
                    title: ""
                });
                this.map.setCenter(this.options.center);
            }     

            if (settings.locations instanceof Array) {
                this.plotArray(settings.locations);
            }

            if (settings.kml) {
                var mainLayer = new google.maps.KmlLayer(settings.kml);
                mainLayer.setMap(this.map);
            }
            
            if (settings.layers) {
                var layers = [];
                while (settings.layers.length > 0){
                    var m = new google.maps.KmlLayer(settings.layers.pop());
                    layers.push(m);
                    m.setMap(this.map);
                }
            }
        },
        mappingInitialize: function () {
            this.options = {
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: new google.maps.LatLng(0, 0)
            };

            this.map = new google.maps.Map(document.getElementById("jekyll-mapping"), this.options);

            if (settings.pages) {
                this.indexMap();
            } else {
                this.pageToMap();
            }
        },
        loadScript: function (set) {
            settings = set;
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "http://maps.googleapis.com/maps/api/js?key=" + settings.api_key + "&sensor=false&callback=jekyllMapping.mappingInitialize";
            document.body.appendChild(script);
        }
    };
}());
</script> 
        
    

  </body>
</html>
